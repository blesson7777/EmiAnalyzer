{% extends 'user/layout.html' %}
{% load static %}
{% block title %}Charts | EMI Analyzer{% endblock %}
{% block content %}
<div class="mf-page-head animate-on-scroll"><div><h4 class="mb-1">Charts & Trends</h4><p class="mb-0">Visualize EMI, cashflow, and timeline.</p></div></div>
<div class="row g-4">
    <div class="col-lg-4"><div class="card mf-chart-card h-100"><div class="card-body"><h6 class="mb-2 mf-chart-head">Debt Mix (Loans + Cards)</h6><canvas id="emiPieChart" height="260"></canvas></div></div></div>
    <div class="col-lg-4"><div class="card mf-chart-card h-100"><div class="card-body"><h6 class="mb-2 mf-chart-head">Monthly Cashflow (Card-Aware)</h6><canvas id="cashflowBarChart" height="260"></canvas></div></div></div>
    <div class="col-lg-4"><div class="card mf-chart-card h-100"><div class="card-body"><h6 class="mb-2 mf-chart-head">Loan Timeline</h6><canvas id="loanTimelineChart" height="260"></canvas></div></div></div>
</div>
{{ chart_payload|json_script:'chartPayload' }}
{% endblock %}
{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'js/charts.js' %}?v=20260303"></script>
<script>
const p=document.getElementById('chartPayload'); if(p){ renderFinancialCharts(JSON.parse(p.textContent)); }
</script>
{% endblock %}
