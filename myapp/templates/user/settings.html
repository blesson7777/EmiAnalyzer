{% extends 'user/layout.html' %}
{% block title %}Settings | EMI Analyzer{% endblock %}
{% block content %}
<div class="mf-page-head"><div><h4 class="mb-1">Settings</h4><p class="mb-0">Update account email, phone number, and password.</p></div></div>
<div class="row g-4">
<div class="col-lg-8"><div class="card mf-form-card"><div class="card-body p-4">
<form method="post" enctype="multipart/form-data">{% csrf_token %}
<h6 class="mb-3">Profile Photo</h6>
<div class="d-flex align-items-center gap-3 mb-3">
    {% if profile_photo_url %}
        <img src="{{ profile_photo_url }}" alt="Profile Photo" class="mf-profile-photo-lg">
    {% else %}
        <div class="mf-avatar-lg">{{ user.username|first|upper }}</div>
    {% endif %}
    <div class="w-100">
        <label class="form-label">Upload New Photo</label>
        <input type="file" class="form-control" name="profile_photo" accept=".jpg,.jpeg,.png,.webp,image/jpeg,image/png,image/webp">
        {% if profile_photo_url %}
            <div class="form-check mt-2"><input class="form-check-input" type="checkbox" name="remove_profile_photo" id="removePhoto"><label class="form-check-label" for="removePhoto">Remove current photo</label></div>
        {% endif %}
    </div>
</div>
<div class="mb-3"><label class="form-label">Email</label><input type="email" class="form-control" name="email" value="{{ user.email }}" required></div>
<div class="mb-3"><label class="form-label">Phone Number</label><input type="text" class="form-control" name="phone_number" value="{{ phone_number }}" minlength="10" maxlength="15" pattern="[0-9]{10,15}" required></div>
<hr class="my-4"><h6 class="mb-3">Change Password</h6>
<div class="mb-3"><label class="form-label">Current Password</label><input type="password" class="form-control" name="current_password" minlength="8"></div>
<div class="row g-3"><div class="col-md-6"><label class="form-label">New Password</label><input type="password" class="form-control" name="new_password" minlength="8"></div><div class="col-md-6"><label class="form-label">Confirm New Password</label><input type="password" class="form-control" name="confirm_password" minlength="8"></div></div>
<button type="submit" class="btn btn-primary mt-4">Save Settings</button>
</form>
</div></div></div>
<div class="col-lg-4"><div class="card mf-panel-card h-100"><div class="card-body"><h6 class="mb-2">Security Notes</h6><ul class="mb-0 ps-3"><li class="mb-2">Use strong password with letters and numbers.</li><li class="mb-2">Password updates require current password.</li><li>Use lock screen when away from system.</li></ul></div></div></div>
</div>
{% endblock %}
