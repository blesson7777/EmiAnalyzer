{% extends 'admin/layout.html' %}
{% block title %}System Controls | EMI Analyzer Admin{% endblock %}
{% block content %}
<div class="mf-page-head">
    <div>
        <h4 class="mb-1">System Controls</h4>
        <p class="mb-0">Tune risk thresholds, savings guidance, and advisory messaging.</p>
    </div>
</div>

<div class="row g-4">
    <div class="col-lg-8">
        <div class="card mf-form-card">
            <div class="card-body p-4">
                <form method="post">
                    {% csrf_token %}
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Green Limit (%)</label>
                            <input type="number" step="0.01" class="form-control" name="emi_green_limit" value="{{ settings_obj.emi_green_limit }}" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Yellow Limit (%)</label>
                            <input type="number" step="0.01" class="form-control" name="emi_yellow_limit" value="{{ settings_obj.emi_yellow_limit }}" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">High Interest Warning (%)</label>
                            <input type="number" step="0.01" class="form-control" name="high_interest_rate_limit" value="{{ settings_obj.high_interest_rate_limit }}" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Savings Target (%)</label>
                            <input type="number" step="0.01" class="form-control" name="savings_target_percent" value="{{ settings_obj.savings_target_percent }}" required>
                        </div>
                        <div class="col-12">
                            <label class="form-label">Advisory Message</label>
                            <textarea class="form-control" name="advisory_message" rows="4" maxlength="500">{{ settings_obj.advisory_message }}</textarea>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary mt-4">Save Controls</button>
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card mf-panel-card h-100">
            <div class="card-body">
                <h6 class="mb-3">Control Guidelines</h6>
                <ul class="mb-0 ps-3">
                    <li class="mb-2">Keep green threshold below yellow threshold.</li>
                    <li class="mb-2">Use realistic interest warnings for your market.</li>
                    <li class="mb-2">Savings target is used in user dashboard nudges.</li>
                    <li>Advisory message appears on all user/admin pages.</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
